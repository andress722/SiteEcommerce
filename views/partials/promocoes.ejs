
<section class="d-flex flex-column" style="height: 319px">
    <h2 style="margin-top: 30PX; margin-top: 30PX;  margin-bottom: 26px;  text-align: center;">PROMOÇÃO</h2>

        
      <div class="container-fluid p-0 d-flex flex-wrap" id="listagem-produto-promo"></div>
  </section>



<script>
  async function pesquisar(){

      const response = await fetch('/api/produtos')
      let json = await response.json()
      let produtoc = json.produtos.map(e=>e)
      let listagem = document.getElementById('listagem-produto-promo')
      
      for(let i = 0; i<=produtoc.length; i++ ){
          console.log(produtoc[i].nome)
          let article = document.createElement('article')
          article.setAttribute('id', 'article-index')
      
          let div = document.createElement('div')
          div.setAttribute('class', 'd-flex')
          div.setAttribute('id', 'div-pesquisa')
          let p = document.createElement('p')
          p.appendChild(document.createTextNode(produtoc[i].nome))
          p.setAttribute('class', 'p-pesuisa')
          div.appendChild(p)
          let span = document.createElement('span')
          span.appendChild(document.createTextNode('R$' + ' ' + produtoc[i].valor))
          span.setAttribute('class', 'span-pesquisa')
          div.appendChild(span)
          let pre = document.createElement('pre')
          pre.setAttribute('class', 'btn bi bi-cart btn-primary active p-0')
          pre.appendChild(document.createTextNode(' Adicionar'))
          pre.onclick = ()=> {
            window.location.href = `/produtos/${produtoc[i].id}`
          }
          div.appendChild(pre)
          let img = document.createElement('img')
          img.setAttribute('src', `/uploads/${produtoc[i].imagem}`)
          img.setAttribute('class', 'img-article')
          img.setAttribute('href', `/produtos/${produtoc[i].id}`)
          img.onclick = ()=> {
            window.location.href = `/produtos/${produtoc[i].id}`
          }
          article.appendChild(img)
          article.appendChild(div)
          
          listagem.appendChild(article)
      }
    }
    window.addEventListener('load', pesquisar)


</script>